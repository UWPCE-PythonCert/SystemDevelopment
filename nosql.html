

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Non RDBMS Database Options &mdash; System Development With Python 2.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="System Development With Python 2.0 documentation" href="index.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> System Development With Python
          

          
          </a>

          
            
            
              <div class="version">
                2.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <!-- Local TOC -->
                <div class="local-toc"><ul>
<li><a class="reference internal" href="#">Non RDBMS Database Options</a><ul>
<li><a class="reference internal" href="#nosql-databases">NoSQL databases</a></li>
<li><a class="reference internal" href="#database-schema">Database Schema</a></li>
<li><a class="reference internal" href="#schemaless">Schemaless</a></li>
<li><a class="reference internal" href="#nosql-in-python">NoSQL in Python:</a></li>
<li><a class="reference internal" href="#external-nosql-systems">2. External NoSQL systems</a></li>
<li><a class="reference internal" href="#python-object-database">3. Python object database</a></li>
<li><a class="reference internal" href="#zodb">ZODB</a></li>
<li><a class="reference internal" href="#mongodb">MongoDB</a></li>
<li><a class="reference internal" href="#other-options-to-consider">Other Options to Consider</a></li>
<li><a class="reference internal" href="#example-data-model">Example Data Model</a></li>
</ul>
</li>
</ul>
</div>
            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">System Development With Python</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Non RDBMS Database Options</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/nosql.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="non-rdbms-database-options">
<span id="nosql"></span><h1>Non RDBMS Database Options<a class="headerlink" href="#non-rdbms-database-options" title="Permalink to this headline">¶</a></h1>
<div class="section" id="nosql-databases">
<h2>NoSQL databases<a class="headerlink" href="#nosql-databases" title="Permalink to this headline">¶</a></h2>
<p>In &#8220;NoSQL&#8221; these key features are mostly shared:</p>
<ul class="simple">
<li>&#8220;schema less&#8221; - Document oriented</li>
<li>More direct mapping to an object model.</li>
<li>Scalable - Easy to distribute / parallelize</li>
</ul>
</div>
<div class="section" id="database-schema">
<h2>Database Schema<a class="headerlink" href="#database-schema" title="Permalink to this headline">¶</a></h2>
<p>A database schema is the organization of data, and description of how a
database is constructed: Divided into database tables, and
relationships: foreign keys, etc.</p>
<p>Includes what fields in what tables, what data types each field is,
normalization of shared data, etc.</p>
<p>This requires work up-front, and can be hard to adapt as the system
requirements change.</p>
<p>It can also require effort to map your programming data model to the
schema.</p>
</div>
<div class="section" id="schemaless">
<h2>Schemaless<a class="headerlink" href="#schemaless" title="Permalink to this headline">¶</a></h2>
<p>Schemaless databases generally follow a &#8220;document model&#8221;.</p>
<p>Each entry in the database is a &#8220;document&#8221;:</p>
<ul class="simple">
<li>essentially an arbitrary collection of fields.</li>
<li>often looks like a Python dict.</li>
</ul>
<p>Not every entry has to have exactly the same structure.</p>
<p>Maps well to dynamic programming languages.</p>
<p>Adapts well as the system changes.</p>
</div>
<div class="section" id="nosql-in-python">
<h2>NoSQL in Python:<a class="headerlink" href="#nosql-in-python" title="Permalink to this headline">¶</a></h2>
<p>Three Categories:</p>
<ol class="arabic simple">
<li>Simple key-value object store</li>
</ol>
<ul class="simple">
<li><a class="reference external" href="https://docs.python.org/2/library/shelve.html">shelve</a>, based on
<a class="reference external" href="https://docs.python.org/2/library/pickle.html">pickle</a> and
<a class="reference external" href="https://docs.python.org/2/library/anydbm.html">anydbm</a></li>
<li>Can store any <a class="reference external" href="https://docs.python.org/2/library/pickle.html#what-can-be-pickled-and-unpickled">picklable Python
object</a></li>
<li>Only provides storage and retrieval</li>
</ul>
</div>
<div class="section" id="external-nosql-systems">
<h2>2. External NoSQL systems<a class="headerlink" href="#external-nosql-systems" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Python bindings to external NoSQL system</li>
<li>Doesn&#8217;t store full Python objects</li>
<li>Generally stores arbitrary collections of data (but not classes)</li>
<li>Can be simple key-value stores - Redis, etc...</li>
<li>Or a more full featured document database: in-database searching,
etc. - mongoDB, etc...</li>
<li>Or a Map/Reduce engine: - Hadoop</li>
</ul>
</div>
<div class="section" id="python-object-database">
<h2>3. Python object database<a class="headerlink" href="#python-object-database" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Stores and retrieves arbitrary Python objects.</li>
<li>Don&#8217;t need to adapt your data model at all.</li>
<li>ZODB is the most robust and maintained system</li>
</ul>
</div>
<div class="section" id="zodb">
<h2><a class="reference external" href="http://http://www.zodb.org/">ZODB</a><a class="headerlink" href="#zodb" title="Permalink to this headline">¶</a></h2>
<p>The Zope Object Data Base: A native object database for Python</p>
<ul class="simple">
<li>Transparent persistence for Python objects</li>
<li>Full ACID-compatible transaction support (including savepoints)</li>
<li>History/undo ability</li>
<li>Efficient support for binary large objects (BLOBs)</li>
<li>Pluggable storages</li>
<li>Scalable architecture</li>
</ul>
</div>
<div class="section" id="mongodb">
<h2><a class="reference external" href="https://www.mongodb.org/">MongoDB</a><a class="headerlink" href="#mongodb" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Document-Oriented Storage - JSON-style documents with dynamic schemas
offer simplicity and power.</li>
<li>Full Index Support - Index on any attribute, just like you&#8217;re used
to.</li>
<li>Replication and High Availability - Mirror across LANs and WANs for
scale and peace of mind.</li>
<li>Auto-Sharding - Scale horizontally without compromising
functionality.</li>
<li>Querying - Rich, document-based queries.</li>
</ul>
</div>
<div class="section" id="other-options-to-consider">
<h2>Other Options to Consider<a class="headerlink" href="#other-options-to-consider" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="http://redis.io/">Redis</a>: Advanced, Scalable key-value store.</p>
<p><a class="reference external" href="http://docs.basho.com/riak/latest/dev/taste-of-riak/python/">Riak</a>:
High availability/scalablity</p>
<p><a class="reference external" href="http://hyperdex.org/">HyperDex</a>: &#8220;Next generation key-value store&#8221;</p>
<p><a class="reference external" href="http://pycassa.github.io/pycassa/">Apache Cassandra</a>: A more
schema-based NoSQL solution</p>
</div>
<div class="section" id="example-data-model">
<h2>Example Data Model<a class="headerlink" href="#example-data-model" title="Permalink to this headline">¶</a></h2>
<p>An Address Book with a not quite trivial data model.</p>
<p>There are people:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="bp">self</span><span class="o">.</span><span class="n">first_name</span>
<span class="bp">self</span><span class="o">.</span><span class="n">last_name</span>
<span class="bp">self</span><span class="o">.</span><span class="n">middle_name</span>
<span class="bp">self</span><span class="o">.</span><span class="n">cell_phone</span>
<span class="bp">self</span><span class="o">.</span><span class="n">email</span>
</pre></div>
</div>
<p>There are households:</p>
<div class="highlight-python"><div class="highlight"><pre>    self.name
    self.people
    self.address
    self.phone

(similarly businesses)
</pre></div>
</div>
<p>see examples/NoSQL/address_book_model.py</p>
</div><div class="section slide"><p class="rubric" id="using-zodb">Using ZODB</p>
<p>ZODB stores Python objects. To make an object persistent:</p>
<div class="highlight-python"><div class="highlight"><pre>import persistent

class Something(persistent.Persistent):
  def __init__(self):
      self.a_field = &#39;&#39;
      self.another_field &#39;&#39;
</pre></div>
</div>
<p>When a change is made to the fields, the DB will keep it updated.</p>
<p>See examples/NoSQL/address_book_zodb.py</p>
</div><div class="section slide"><p class="rubric" id="mutable-attributes-in-zodb">Mutable Attributes in ZODB</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">Something</span><span class="o">.</span><span class="n">this</span> <span class="o">=</span> <span class="n">that</span>
<span class="c"># will trigger a DB action</span>

<span class="c"># But:</span>

<span class="n">Something</span><span class="o">.</span><span class="n">a_list</span><span class="o">.</span><span class="n">append</span>
<span class="c"># will not trigger anything.</span>

<span class="c"># The DB doesn&#39;t know that that the list has been altered.</span>
<span class="c"># Solution:</span>

<span class="bp">self</span><span class="o">.</span><span class="n">a_list</span> <span class="o">=</span> <span class="n">PersistentList</span><span class="p">()</span>
<span class="c"># (also PersistantDict() )</span>

<span class="c"># (or write getter and setter properties...)</span>
</pre></div>
</div>
</div><div class="section slide"><p class="rubric" id="mongodb-1">MongoDB</p>
<p>Essentially a key-value store, but the values are JSON-like objects in
the <a class="reference external" href="http://bsonspec.org/">BSON (binary JSON)</a> format</p>
<p>So you can store any object that can look like JSON:</p>
<ul class="simple">
<li>dicts</li>
<li>lists</li>
<li>numbers</li>
<li>strings</li>
<li>richer than JSON.</li>
</ul>
</div><div class="section slide"><p class="rubric" id="mongodb-and-python">MongoDB and Python</p>
<p>MongoDB is written in C++ &#8211; can be accessed by various language
<a class="reference external" href="http://docs.mongodb.org/manual/applications/drivers/">drivers</a></p>
<p>For Python we have
<a class="reference external" href="http://api.mongodb.org/python/current/tutorial.html%0A">PyMongo</a></p>
<p>There are also various tools for integrating mongoDB with Python
frameworks:</p>
<ul class="simple">
<li>Django MongoDB Engine</li>
<li>mongodb_beaker</li>
<li>MongoLog: Python logging handler</li>
<li>Flask-PyMongo</li>
<li>others...</li>
</ul>
</div><div class="section slide"><p class="rubric" id="getting-started-with-mongodb">Getting started with mongoDB</p>
<p>mongoDB is separate program. Installers here:
<a class="reference external" href="http://www.mongodb.org/downloads">http://www.mongodb.org/downloads</a></p>
<p>Create a dir for the database:</p>
<div class="highlight-python"><div class="highlight"><pre>$ mkdir mongo_data
# And start it up:
$ mongod --dbpath=mongo_data/
</pre></div>
</div>
</div><div class="section slide"><p class="rubric" id="creating-a-mongo-db">Creating a Mongo DB:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># create the DB</span>
<span class="kn">from</span> <span class="nn">pymongo</span> <span class="kn">import</span> <span class="n">MongoClient</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">MongoClient</span><span class="p">(</span><span class="s">&#39;localhost&#39;</span><span class="p">,</span> <span class="mi">27017</span><span class="p">)</span>
<span class="n">store</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">store_name</span> <span class="c"># creates a Database</span>
<span class="n">people</span> <span class="o">=</span> <span class="n">store</span><span class="o">.</span><span class="n">people</span> <span class="c"># creates a collection</span>
</pre></div>
</div>
<p>mongo will link to the given database and collection, or create new ones
if they don&#8217;t exist.</p>
<p>Adding some stuff:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">people</span><span class="o">.</span><span class="n">insert</span><span class="p">({</span><span class="s">&#39;first_name&#39;</span><span class="p">:</span> <span class="s">&#39;Fred&#39;</span><span class="p">,</span>
              <span class="s">&#39;last_name&#39;</span><span class="p">:</span> <span class="s">&#39;Jones&#39;</span><span class="p">})</span>
</pre></div>
</div>
</div><div class="section slide"><p class="rubric" id="pulling-data-out">Pulling Data Out</p>
<div class="highlight-python"><div class="highlight"><pre>In [16]: people.find_one({&#39;first_name&#39;:&quot;Fred&quot;})
Out[16]:
{u&#39;_id&#39;: ObjectId(&#39;534dcdcb5c84d28b596ad15e&#39;),
 u&#39;first_name&#39;: u&#39;Fred&#39;,
 u&#39;last_name&#39;: u&#39;Jones&#39;}
</pre></div>
</div>
<p>Note that it adds an ObjectID for you. See
examples/NoSQL/address_book_mongo.py</p>
</div><div class="section slide"><p class="rubric" id="questions">Questions?</p>
</div><p><a class="reference external" href="#">←</a> <a class="reference external" href="#">→</a></p>
<blockquote>
<div>/</div></blockquote>
<p>Go to slide:</p>
<p><a class="reference external" href=".">#</a></p>
</div>
</div>


           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Christopher Barker, Joseph Sheedy, Maria McKinley.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'2.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>