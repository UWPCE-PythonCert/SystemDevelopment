<!--
Google IO 2012/2013 HTML5 Slide Template

Authors: Eric Bidelman <ebidel@gmail.com>
         Luke Mah√© <lukem@google.com>

URL: https://code.google.com/p/io-2012-slides
--><!DOCTYPE html>


<html>
<head>
  <title>Advanced Object Oriented Features of Python &mdash; System Development with Python</title>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <!--<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">-->
  <!--<meta name="viewport" content="width=device-width, initial-scale=1.0">-->
  <!--This one seems to work all the time, but really small on ipad-->
  <!--<meta name="viewport" content="initial-scale=0.4">-->
  <meta name="apple-mobile-web-app-capable" content="yes">

  <meta name="hieroglyph-title" data-config-title>
  <meta name="hieroglyph-subtitle" data-config-subtitle>
  <meta name="hieroglyph-presenter" data-config-presenter>

  
  <link rel="stylesheet" media="all"
        href="_static/theme/css/default.css">
  <link rel="stylesheet" media="all"
        href="_static/theme/css/hieroglyph.css">
  <link rel="stylesheet" media="only screen and (max-device-width: 480px)"
        href="_static/theme/css/phone.css">

    
    <link rel="stylesheet" href="_static/custom.css"
          type="text/css" />
    

    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <base target="_blank"> <!-- This amazingness opens all links in a new tab. -->
  
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '2.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>

    <script data-main="_static/js/slides"
            src="_static/js/require-1.0.8.min.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    
    <link rel="top" title="System Development with Python" href="index.html" /> 
</head>
<body style="opacity: 0">

<slides class="layout-widescreen">

  <slide class="title-slide segue nobackground">
<!-- The content of this hgroup is replaced programmatically through the slide_config.json. -->
<hgroup class="auto-fadein">
  <h1 data-config-title><!-- populated from slide_config.json --></h1>
  <h2 data-config-subtitle><!-- populated from slide_config.json --></h2>
  <p data-config-presenter><!-- populated from slide_config.json --></p>
</hgroup>
</slide>

  
    <slide class="title-slide segue nobackground level-1" id="advanced-object-oriented-features-of-python">
    <hgroup>
      <h1>Advanced Object Oriented Features of Python</h1>
    </hgroup>
    <article class="">
      <ul class="simple">
<li>Chris Barker</li>
</ul>
<p><code class="docutils literal"><span class="pre">PythonCHB&#64;gmail.com</span></code></p>




    </article>
  </slide>  <slide class="level-2" id="multiple-inheritance">
    <hgroup>
      <h2>Multiple Inheritance</h2>
    </hgroup>
    <article class="">
      <p>Pulling methods from more than one class</p>




    </article>
  </slide>  <slide class="level-3" id="id1">
    <hgroup>
      <h3>multiple inheritance</h3>
    </hgroup>
    <article class="">
      <div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Combined</span><span class="p">(</span><span class="n">Super1</span><span class="p">,</span> <span class="n">Super2</span><span class="p">,</span> <span class="n">Super3</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">something</span><span class="p">,</span> <span class="n">something</span> <span class="k">else</span><span class="p">):</span>
        <span class="n">Super1</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">......</span><span class="p">)</span>
        <span class="n">Super2</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">......</span><span class="p">)</span>
        <span class="n">Super3</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">......</span><span class="p">)</span>
</pre></div>
</div>
<p>(calls to the super classes <code class="docutils literal"><span class="pre">__init__</span></code> are optional and case dependent)</p>




    </article>
  </slide>  <slide class="level-3" id="id6">
    <hgroup>
      <h3>multiple inheritance</h3>
    </hgroup>
    <article class="">
      <p><strong>Method Resolution Order:</strong>  left to right</p>
<ol class="arabic simple">
<li>Is it an instance attribute ?</li>
<li>Is it a class attribute ?</li>
<li>Is it a superclass attribute ?<ol class="loweralpha">
<li>is it an attribute of the left-most superclass?</li>
<li>is it an attribute of the next superclass?</li>
<li><code class="docutils literal"><span class="pre">....</span></code></li>
</ol>
</li>
<li>Is it a super-superclass attribute ?</li>
<li>also left to right...</li>
</ol>
<p>( This can get complicated --- more on that later...)</p>




    </article>
  </slide>  <slide class="level-3" id="mix-ins">
    <hgroup>
      <h3>Mix-ins</h3>
    </hgroup>
    <article class="">
      <p>Why would you want to do this?</p>
<p>Hierarchies are not always simple:</p>
<ul class="simple">
<li>Animal<ul>
<li>Mammal<ul>
<li>GiveBirth()</li>
</ul>
</li>
<li>Bird<ul>
<li>LayEggs()</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>Where do you put a Platypus?</p>
<p>Real World Example: <code class="docutils literal"><span class="pre">wxPython</span> <span class="pre">FloatCanvas</span></code></p>




    </article>
  </slide>  <slide class="level-3" id="the-diamond-problem">
    <hgroup>
      <h3>The Diamond Problem</h3>
    </hgroup>
    <article class="">
      <div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">A</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">do_your_stuff</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span> <span class="s2">&quot;doing A&#39;s stuff&quot;</span>

<span class="k">class</span> <span class="nc">B</span><span class="p">(</span><span class="n">A</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">do_your_stuff</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">A</span><span class="o">.</span><span class="n">do_your_stuff</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">print</span> <span class="s2">&quot;doing B&#39;s stuff&quot;</span>

<span class="k">class</span> <span class="nc">C</span><span class="p">(</span><span class="n">A</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">do_your_stuff</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">A</span><span class="o">.</span><span class="n">do_your_stuff</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">print</span> <span class="s2">&quot;doing C&#39;s stuff&quot;</span>

<span class="k">class</span> <span class="nc">D</span><span class="p">(</span><span class="n">B</span><span class="p">,</span><span class="n">C</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">do_your_stuff</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">B</span><span class="o">.</span><span class="n">do_your_stuff</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">C</span><span class="o">.</span><span class="n">do_your_stuff</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">print</span> <span class="s2">&quot;doing D&#39;s stuff&quot;</span>
</pre></div>
</div>




    </article>
  </slide>  <slide class="level-3" id="id2">
    <hgroup>
      <h3>The Diamond Problem</h3>
    </hgroup>
    <article class="">
      <p>Multiple paths to the same superclass:</p>
<a class="reference internal image-reference" href="_images/Diamond_inheritance.png"><img alt="_images/Diamond_inheritance.png" class="align-center" src="_images/Diamond_inheritance.png" style="height: 400px;" /></a>
<p>A's methods can get called twice.</p>
<p>(demo: <code class="docutils literal"><span class="pre">Examples/week-06-OO/diamond.py</span></code>)</p>




    </article>
  </slide>  <slide class="level-3" id="the-method-resolution-order">
    <hgroup>
      <h3>The Method Resolution Order</h3>
    </hgroup>
    <article class="">
      <p>Python's The Method Resolution Order ( MRO ) is defined by the C3
linearization algorithm:</p>
<p><a class="reference external" href="http://en.wikipedia.org/wiki/C3_linearization">http://en.wikipedia.org/wiki/C3_linearization</a>.</p>
<p>In C3, only the last occurrence of a given class is retained.</p>
<p>In short: corrects the multiple calls to the same method problem</p>
<p>The classic description of modern MRO by Guido:</p>
<p><a class="reference external" href="http://www.python.org/download/releases/2.2.2/descrintro/#mro">http://www.python.org/download/releases/2.2.2/descrintro/#mro</a></p>
<p>And one more:</p>
<p><a class="reference external" href="http://www.python.org/download/releases/2.3/mro/">http://www.python.org/download/releases/2.3/mro/</a></p>
<p>demo: <code class="docutils literal"><span class="pre">__mro__</span></code></p>




    </article>
  </slide>  <slide class="level-3" id="super">
    <hgroup>
      <h3>super()</h3>
    </hgroup>
    <article class="">
      <p>Getting the superclass:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">SafeVehicle</span><span class="p">(</span><span class="n">Vehicle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Safe Vehicle subclass of Vehicle base class...</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">velocity</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">icon</span><span class="o">=</span><span class="s1">&#39;S&#39;</span><span class="p">):</span>
        <span class="n">Vehicle</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">position</span><span class="p">,</span> <span class="n">velocity</span><span class="p">,</span> <span class="n">icon</span><span class="p">)</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">Vehicle</span></code> is repeated here -- what if we wanted to change the superclass?</p>
<p>And there were a bunch of references to Vehicle?</p>




    </article>
  </slide>  <slide class="level-3" id="id3">
    <hgroup>
      <h3>super()</h3>
    </hgroup>
    <article class="">
      <p>Getting the superclass:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">SafeVehicle</span><span class="p">(</span><span class="n">Vehicle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Safe Vehicle subclass of Vehicle base class</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">velocity</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">icon</span><span class="o">=</span><span class="s1">&#39;S&#39;</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">SafeVehicle</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="n">position</span><span class="p">,</span> <span class="n">velocity</span><span class="p">,</span> <span class="n">icon</span><span class="p">)</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">super</span></code> is about more than just making it easier to refactor.</p>
<p>Remember the method resolution order?</p>
<p>And the diamond problem?</p>




    </article>
  </slide>  <slide class="level-3" id="what-does-super-do">
    <hgroup>
      <h3>What does super() do?</h3>
    </hgroup>
    <article class="">
      <p><code class="docutils literal"><span class="pre">super</span></code> returns a &quot;proxy object&quot; that delegates method calls.</p>
<p>It's not returning the object itself -- but you can call methods on it.</p>
<p>It runs through the method resolution order (MRO) to find the method
you call.</p>
<p>Key point: the MRO is determined <em>at run time</em></p>
<p><a class="reference external" href="http://docs.python.org/2/library/functions.html#super">http://docs.python.org/2/library/functions.html#super</a></p>




    </article>
  </slide>  <slide class="level-3" id="id7">
    <hgroup>
      <h3>What does super() do?</h3>
    </hgroup>
    <article class="">
      <p>Not the same as calling one superclass method: <code class="docutils literal"><span class="pre">super()</span></code>
will call all the sibling superclass methods:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">D</span><span class="p">(</span><span class="n">C</span><span class="p">,</span> <span class="n">B</span><span class="p">,</span> <span class="n">A</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
       <span class="nb">super</span><span class="p">(</span><span class="n">D</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">()</span>
</pre></div>
</div>
<p>same as:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">D</span><span class="p">(</span><span class="n">C</span><span class="p">,</span> <span class="n">B</span><span class="p">,</span> <span class="n">A</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
       <span class="n">C</span><span class="o">.</span><span class="n">__init__</span><span class="p">()</span>
       <span class="n">B</span><span class="o">.</span><span class="n">__init__</span><span class="p">()</span>
       <span class="n">A</span><span class="o">.</span><span class="n">__init__</span><span class="p">()</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">You may not want that --</div>
<div class="line">demo: <code class="docutils literal"><span class="pre">Examples/week-06-OO/super_test.ipnb</span></code></div>
</div>




    </article>
  </slide>  <slide class="level-3" id="super-mechanics">
    <hgroup>
      <h3>super() mechanics</h3>
    </hgroup>
    <article class="">
      <p>Notice this (frankly ugly) requirement:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="nb">super</span><span class="p">(</span><span class="nb">type</span><span class="p">[,</span> <span class="nb">object</span><span class="o">-</span><span class="ow">or</span><span class="o">-</span><span class="nb">type</span><span class="p">])</span>
</pre></div>
</div>
<p>which usually is somethign like:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">B</span><span class="p">(</span><span class="n">A</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">a_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">B</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">a_method</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>
</div>
<p>So why in the world do you need to specify both <cite>B</cite> (the type), and
<cite>self</cite> (the instance?)</p>




    </article>
  </slide>  <slide class="level-3" id="id8">
    <hgroup>
      <h3>super() mechanics</h3>
    </hgroup>
    <article class="">
      <p>First: Python 3 has cleaned this up, it's just:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">B</span><span class="p">(</span><span class="n">A</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">a_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">a_method</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>
</div>
<p>In py3.</p>
<p>In Python2, super was tacked on, so the additonal info is
needed, and it does have the advantage of being explicit about the two
inputs to the computation (the mro of self and the current position in
the mro).</p>
<p>Note that while <cite>self</cite> needs to be a subclass of B here, it may not
actually be an <em>instance</em> of B -- it could be a subclass.</p>
<p>That's why both need to be specified.</p>




    </article>
  </slide>  <slide class="level-3" id="more-detail-about-super">
    <hgroup>
      <h3>More detail about super()</h3>
    </hgroup>
    <article class="">
      <p>Two seminal articles about <code class="docutils literal"><span class="pre">super()</span></code>:</p>
<p>&quot;<em>Super Considered Harmful</em>&quot;</p>
<blockquote>
<div><ul class="simple">
<li>James Knight</li>
</ul>
</div></blockquote>
<p><a class="reference external" href="https://fuhm.net/super-harmful">https://fuhm.net/super-harmful</a></p>
<p>&quot;<em>super() Considered Super!</em>&quot;</p>
<blockquote>
<div><ul class="simple">
<li>Raymond Hettinger</li>
</ul>
</div></blockquote>
<p><a class="reference external" href="http://rhettinger.wordpress.com/2011/05/26/super-considered-super">http://rhettinger.wordpress.com/2011/05/26/super-considered-super</a></p>
<p>(Both worth reading....)</p>




    </article>
  </slide>  <slide class="level-3" id="super-issues">
    <hgroup>
      <h3>super() issues...</h3>
    </hgroup>
    <article class="">
      <p>Both actually say similar things:</p>
<ul class="simple">
<li>The method being called by super() needs to exist</li>
<li>Every occurrence of the method needs to use super():<ul>
<li>Use it consistently, and document that you use it, as it is part
of the external interface for your class, like it or not.</li>
</ul>
</li>
</ul>




    </article>
  </slide>  <slide class="level-3" id="calling-super">
    <hgroup>
      <h3>calling super():</h3>
    </hgroup>
    <article class="">
      <p>The caller and callee need to have a matching argument signature:</p>
<p>Never call super with anything but the exact arguments you received,
unless you really know what you're doing.</p>
<p>If you add one or more optional arguments, always accept</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
</pre></div>
</div>
<p>and call super like</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="nb">super</span><span class="p">(</span><span class="n">MyClass</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">method</span><span class="p">(</span><span class="n">args_declared</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>
</div>




    </article>
  </slide>  <slide class="level-3" id="lab">
    <hgroup>
      <h3>LAB</h3>
    </hgroup>
    <article class="">
      <p>In <code class="docutils literal"><span class="pre">Examples/week-06-OO/mixins.py</span></code>, you will find a few Vehicle classes
laid out in a hierarchy</p>
<p>The log() method is defined on Vehicle then called on a couple of
instances</p>
<p>Modify the class definition for Bike to mix in fancier log() method
from LoggingMixin</p>
<p>Does the output change accordingly? If it didn't, look at the MRO for
Bike? Is it what you expected?</p>




    </article>
  </slide>  <slide class="level-2" id="new">
    <hgroup>
      <h2>__new__</h2>
    </hgroup>
    <article class="">
      <p class="large">Into the depths of object creation:</p>
<p class="medium">What <em>really</em> happens when a class instance is created?</p>




    </article>
  </slide>  <slide class="level-3" id="class-creation">
    <hgroup>
      <h3>Class Creation</h3>
    </hgroup>
    <article class="">
      <p>What happens when a class instance is created?</p>
<p>This is the usual thing...</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Class</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg1</span><span class="p">,</span> <span class="n">arg2</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">arg1</span> <span class="o">=</span> <span class="n">arg1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">arg2</span> <span class="o">=</span> <span class="n">arg2</span>
        <span class="o">.....</span>
</pre></div>
</div>
<ul class="simple">
<li>A new instance is created</li>
<li><code class="docutils literal"><span class="pre">__init__</span></code> is called</li>
<li>The code in <code class="docutils literal"><span class="pre">__init__</span></code> is run to initialize the instance</li>
</ul>
<p>Note that <code class="docutils literal"><span class="pre">self</span></code> is already an instance of the class.</p>




    </article>
  </slide>  <slide class="level-3" id="id9">
    <hgroup>
      <h3>Class Creation</h3>
    </hgroup>
    <article class="">
      <p>What if you need to do something before creation?</p>
<p>Enter: <code class="docutils literal"><span class="pre">__new__</span></code></p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Class</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__new__</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">arg1</span><span class="p">,</span> <span class="n">arg2</span><span class="p">):</span>
        <span class="n">some_code_here</span>
        <span class="k">return</span> <span class="n">cls</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
        <span class="o">...</span>
</pre></div>
</div>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">__new__</span></code> is called: it returns a new instance</li>
<li>The code in <code class="docutils literal"><span class="pre">__new__</span></code> is run to pre-initialize the instance</li>
<li><code class="docutils literal"><span class="pre">__init__</span></code> is called</li>
<li>The code in <code class="docutils literal"><span class="pre">__init__</span></code> is run to initialize the instance</li>
</ul>




    </article>
  </slide>  <slide class="level-3" id="id10">
    <hgroup>
      <h3>Class Creation</h3>
    </hgroup>
    <article class="">
      <p><code class="docutils literal"><span class="pre">__new__</span></code> is a static method -- but it must be called with a class object as the first argument.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Class</span><span class="p">(</span><span class="n">superclass</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__new__</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">arg1</span><span class="p">,</span> <span class="n">arg2</span><span class="p">):</span>
        <span class="n">some_code_here</span>
        <span class="k">return</span> <span class="n">superclass</span><span class="o">.</span><span class="n">__new__</span><span class="p">(</span><span class="n">cls</span><span class="p">)</span>
        <span class="o">.....</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">cls</span></code> is the class object.</p>
<p>The arguments (arg1, arg2) are what's passed in when calling the class.</p>
<p>It needs to return a class instance -- usually by directly calling the superclass <code class="docutils literal"><span class="pre">__new__</span></code></p>
<p>If nothing else, you can call <code class="docutils literal"><span class="pre">object.__new__</span></code></p>




    </article>
  </slide>  <slide class="level-3" id="when-to-use-new">
    <hgroup>
      <h3>When to use <code class="docutils literal"><span class="pre">__new__</span></code></h3>
    </hgroup>
    <article class="">
      <p class="medium">When would  you need to use it:</p>
<ul class="simple">
<li>Subclassing an immutable type:<ul>
<li>It's too late to change it once you get to <code class="docutils literal"><span class="pre">__init__</span></code></li>
</ul>
</li>
<li>When <code class="docutils literal"><span class="pre">__init__</span></code> is not called:<ul>
<li>unpickling</li>
<li>copying</li>
</ul>
</li>
</ul>
<p>You may need to put some code in <code class="docutils literal"><span class="pre">__new__</span></code> to make sure things
go right</p>
<p>More detail here:</p>
<p><a class="reference external" href="http://www.python.org/download/releases/2.7/descrintro/#__new__">http://www.python.org/download/releases/2.7/descrintro/#__new__</a></p>




    </article>
  </slide>  <slide class="level-3" id="id4">
    <hgroup>
      <h3>LAB</h3>
    </hgroup>
    <article class="">
      <p><strong>Demo:</strong></p>
<q>
<code class="docutils literal"><span class="pre">Examples/week-06-OO/new_example.py</span></code></q>
<p><strong>Exercise:</strong></p>
<p>Write a subclass of int that will always be an even number:
round the input to the closest even number:</p>
<blockquote>
<div><p><code class="docutils literal"><span class="pre">Examples/week-06-OO/even_int.py</span></code></p>
<p><code class="docutils literal"><span class="pre">Examples/week-06-OO/test_even_int.py</span></code></p>
</div></blockquote>




    </article>
  </slide>  <slide class="level-3" id="wrap-up">
    <hgroup>
      <h3>Wrap Up</h3>
    </hgroup>
    <article class="">
      <p>Thinking OO in Python:</p>
<p>Think about what makes sense for your code:</p>
<ul class="simple">
<li>Code re-use</li>
<li>Clean APIs</li>
<li>...</li>
</ul>
<p>Don't be a slave to what OO is <em>supposed to look like</em>.</p>
<p>Let OO work for you, not <em>create</em> work for you.</p>




    </article>
  </slide>  <slide class="level-3" id="id5">
    <hgroup>
      <h3>Wrap Up</h3>
    </hgroup>
    <article class="">
      <p>OO in Python:</p>
<p><em>The Art of Subclassing</em>:  -- Raymond Hettinger</p>
<q>
<a class="reference external" href="http://pyvideo.org/video/879/the-art-of-subclassing">http://pyvideo.org/video/879/the-art-of-subclassing</a></q>
<p>&quot;classes are for code re-use -- not creating taxonomies&quot;</p>
<p><em>Stop Writing Classes</em>:  -- Jack Diederich</p>
<p><a class="reference external" href="http://pyvideo.org/video/880/stop-writing-classes">http://pyvideo.org/video/880/stop-writing-classes</a></p>
<p>&quot;If your class has only two methods and one of them is <code class="docutils literal"><span class="pre">__init__</span></code> -- you don't need a class&quot;</p>
<p>and</p>
<p>&quot;I hate code: I want as little of it in our product as possible&quot;</p>




    </article>
  </slide>


  <slide class="thank-you-slide segue nobackground">
  <article class="flexbox vleft auto-fadein">
    <h2>Thank You!</h2>
  </article>
  <p class="auto-fadein" data-config-contact>
    <!-- populated from slide_config.json -->
  </p>
</slide>

  <slide class="backdrop"></slide>

</slides>

<!--[if IE]>
  <script src="http://ajax.googleapis.com/ajax/libs/chrome-frame/1/CFInstall.min.js"></script>
  <script>CFInstall.check({mode: 'overlay'});</script>
<![endif]-->
</body>
</html>